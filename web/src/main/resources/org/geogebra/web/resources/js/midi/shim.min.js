(function(){function e(e){this.message=e}var t="undefined"!=typeof exports?exports:this,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=Error(),e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var i,s,r=0,a=n,o="";t.charAt(0|r)||(a="=",r%1);o+=a.charAt(63&i>>8-8*(r%1))){if(s=t.charCodeAt(r+=.75),s>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|s}return o}),t.atob||(t.atob=function(t){if(t=t.replace(/=+$/,""),1==t.length%4)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,s,r=0,a=0,o="";s=t.charAt(a++);~s&&(i=r%4?64*i+s:s,r++%4)?o+=String.fromCharCode(255&i>>(6&-2*r)):0)s=n.indexOf(s);return o})})();var Base64Binary={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decodeArrayBuffer:function(e){var t=Math.ceil(3*e.length/4),n=new ArrayBuffer(t);return this.decode(e,n),n},decode:function(e,t){var n=this._keyStr.indexOf(e.charAt(e.length-1)),i=this._keyStr.indexOf(e.charAt(e.length-1)),s=Math.ceil(3*e.length/4);64==n&&s--,64==i&&s--;var r,a,o,c,h,u,f,d,p=0,l=0;for(r=t?new Uint8Array(t):new Uint8Array(s),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),p=0;s>p;p+=3)h=this._keyStr.indexOf(e.charAt(l++)),u=this._keyStr.indexOf(e.charAt(l++)),f=this._keyStr.indexOf(e.charAt(l++)),d=this._keyStr.indexOf(e.charAt(l++)),a=h<<2|u>>4,o=(15&u)<<4|f>>2,c=(3&f)<<6|d,r[p]=a,64!=f&&(r[p+1]=o),64!=d&&(r[p+2]=c);return r}};window.AudioContext=window.AudioContext||window.webkitAudioContext||null,window.OfflineAudioContext=window.OfflineAudioContext||window.webkitOfflineAudioContext||null,function(e){var t,n,i,s=function(e){return"[object Function]"===Object.prototype.toString.call(e)||"[object AudioContextConstructor]"===Object.prototype.toString.call(e)},r=[["createGainNode","createGain"],["createDelayNode","createDelay"],["createJavaScriptNode","createScriptProcessor"]];s(e)&&(n=new e,n.destination&&n.sampleRate&&(t=e.prototype,i=Object.getPrototypeOf(n.createBufferSource()),s(i.start)||s(i.noteOn)&&(i.start=function(e,t,n){switch(arguments.length){case 0:throw Error("Not enough arguments.");case 1:this.noteOn(e);break;case 2:if(!this.buffer)throw Error("Missing AudioBuffer");this.noteGrainOn(e,t,this.buffer.duration-t);break;case 3:this.noteGrainOn(e,t,n)}}),s(i.noteOn)||(i.noteOn=i.start),s(i.noteGrainOn)||(i.noteGrainOn=i.start),s(i.stop)||(i.stop=i.noteOff),s(i.noteOff)||(i.noteOff=i.stop),r.forEach(function(e){for(var t,n;e.length;)t=e.pop(),s(this[t])?this[e.pop()]=this[t]:(n=e.pop(),this[t]=this[n])},t)))}(window.AudioContext),function(){"use strict";function e(){}function t(){this.inputInUse=!1,this.outputInUse=!1;var e=document.createElement("object");e.id="_Jazz"+Math.random()+"ie",e.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",this.activeX=e;var t=document.createElement("object");t.id="_Jazz"+Math.random(),t.type="audio/x-jazz",e.appendChild(t),this.objRef=t;var n=document.createElement("p");n.appendChild(document.createTextNode("This page requires the "));var i=document.createElement("a");i.appendChild(document.createTextNode("Jazz plugin")),i.href="http://jazz-soft.net/",n.appendChild(i),n.appendChild(document.createTextNode(".")),t.appendChild(n);var s=document.getElementById("MIDIPlugin");if(!s){var s=document.createElement("div");s.id="MIDIPlugin",s.style.position="absolute",s.style.visibility="hidden",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s)}s.appendChild(e),this._Jazz=this.objRef.isJazz?this.objRef:this.activeX.isJazz?this.activeX:null,this._Jazz&&(this._Jazz._jazzTimeZero=this._Jazz.Time(),this._Jazz._perfTimeZero=window.performance.now())}function n(){this._promise&&this._promise.fail({code:1})}function i(){this.jazz.MidiOutLong(this.data)}var s,r,a,o,c,h;e.prototype.then=function(e,t){this.accept=e,this.reject=t},e.prototype.succeed=function(e){this.accept&&this.accept(e)},e.prototype.fail=function(e){this.reject&&this.reject(e)},s=function s(){var e=new r;return e._promise},r=function(){this._jazzInstances=[],this._jazzInstances.push(new t),this._promise=new e,this._jazzInstances[0]._Jazz?(this._Jazz=this._jazzInstances[0]._Jazz,window.setTimeout(a.bind(this),3)):window.setTimeout(n.bind(this),3)},a=function a(){this._promise&&this._promise.succeed(this)},r.prototype.inputs=function(){if(!this._Jazz)return null;for(var e=this._Jazz.MidiInList(),t=Array(e.length),n=0;e.length>n;n++)t[n]=new o(this,e[n],n);return t},r.prototype.outputs=function(){if(!this._Jazz)return null;for(var e=this._Jazz.MidiOutList(),t=Array(e.length),n=0;e.length>n;n++)t[n]=new c(this,e[n],n);return t},o=function o(e,n,i){this._listeners=[],this._midiAccess=e,this._index=i,this._inLongSysexMessage=!1,this._sysexBuffer=new Uint8Array,this.id=""+i+"."+n,this.manufacturer="",this.name=n,this.type="input",this.version="",this.onmidimessage=null;for(var s=null,r=0;e._jazzInstances.length>r&&!s;r++)e._jazzInstances[r].inputInUse||(s=e._jazzInstances[r]);s||(s=new t,e._jazzInstances.push(s)),s.inputInUse=!0,this._jazzInstance=s._Jazz,this._input=this._jazzInstance.MidiInOpen(this._index,h.bind(this))},o.prototype.addEventListener=function(e,t){if("midimessage"===e){for(var n=0;this._listeners.length>n;n++)if(this._listeners[n]==t)return;this._listeners.push(t)}},o.prototype.removeEventListener=function(e,t){if("midimessage"===e)for(var n=0;this._listeners.length>n;n++)if(this._listeners[n]==t)return this._listeners.splice(n,1),void 0},o.prototype.preventDefault=function(){this._pvtDef=!0},o.prototype.dispatchEvent=function(e){this._pvtDef=!1;for(var t=0;this._listeners.length>t;t++)this._listeners[t].handleEvent?this._listeners[t].handleEvent.bind(this)(e):this._listeners[t].bind(this)(e);return this.onmidimessage&&this.onmidimessage(e),this._pvtDef},o.prototype.appendToSysexBuffer=function(e){var t=this._sysexBuffer.length,n=new Uint8Array(t+e.length);n.set(this._sysexBuffer),n.set(e,t),this._sysexBuffer=n},o.prototype.bufferLongSysex=function(e,t){for(var n=t;e.length>n;){if(247==e[n])return n++,this.appendToSysexBuffer(e.slice(t,n)),n;n++}return this.appendToSysexBuffer(e.slice(t,n)),this._inLongSysexMessage=!0,n},h=function h(e,t){var n,i=0,s=!1;for(n=0;t.length>n;n+=i){if(this._inLongSysexMessage){if(n=this.bufferLongSysex(t,n),247!=t[n-1])return;s=!0}else switch(s=!1,240&t[n]){case 128:case 144:case 160:case 176:case 224:i=3;break;case 192:case 208:i=2;break;case 240:switch(t[n]){case 240:if(n=this.bufferLongSysex(t,n),247!=t[n-1])return;s=!0;break;case 241:case 243:i=2;break;case 242:i=3;break;default:i=1}}var r=document.createEvent("Event");r.initEvent("midimessage",!1,!1),r.receivedTime=parseFloat(""+e)+this._jazzInstance._perfTimeZero,s||this._inLongSysexMessage?(r.data=new Uint8Array(this._sysexBuffer),this._sysexBuffer=new Uint8Array(0),this._inLongSysexMessage=!1):r.data=new Uint8Array(t.slice(n,i+n)),this.dispatchEvent(r)}},c=function c(e,n,i){this._listeners=[],this._midiAccess=e,this._index=i,this.id=""+i+"."+n,this.manufacturer="",this.name=n,this.type="output",this.version="";for(var s=null,r=0;e._jazzInstances.length>r&&!s;r++)e._jazzInstances[r].outputInUse||(s=e._jazzInstances[r]);s||(s=new t,e._jazzInstances.push(s)),s.outputInUse=!0,this._jazzInstance=s._Jazz,this._jazzInstance.MidiOutOpen(this.name)},c.prototype.send=function(e,t){var n=0;if(0===e.length)return!1;if(t&&(n=Math.floor(t-window.performance.now())),t&&n>1){var s={};s.jazz=this._jazzInstance,s.data=e,window.setTimeout(i.bind(s),n)}else this._jazzInstance.MidiOutLong(e);return!0},window.navigator.requestMIDIAccess||(window.navigator.requestMIDIAccess=s)}(window),function(e){function t(){for(var t=["moz","webkit","o","ms"],n=t.length,i={value:function(e){return function(){return Date.now()-e}}(Date.now())};n>=0;n--)if(t[n]+"Now"in e.performance)return i.value=function(t){return function(){e.performance[t]()}}(t[n]+"Now"),i;return"timing"in e.performance&&"connectStart"in e.performance.timing&&(i.value=function(e){return function(){Date.now()-e}}(e.performance.timing.connectStart)),i}var n,i={};"performance"in e&&"now"in e.performance||("performance"in e||Object.defineProperty(e,"performance",{get:function(){return i}}),n=t(),Object.defineProperty(e.performance,"now",n))}(window);