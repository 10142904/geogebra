configurations {
	gwtModule
}

def addArtifact_(name, type) {
    def folder = type == "draft" ? "draftOut" : "out"
    def depdendency = type == "draft" ? "draftCompileGwt" : "compileGwt"
    task("prepare-$name-$type", dependsOn: depdendency, type: Zip) { 
        from "$buildDir/gwt/$folder/$name"
        baseName name
        appendix type
    }

    artifacts {
        gwtModule tasks["prepare-$name-$type"]
    }
}

ext.addDebugArtifact = { name ->
    addArtifact_(name, "draft")
}

ext.addArtifact = { name ->
    addArtifact_(name, "release")
}
